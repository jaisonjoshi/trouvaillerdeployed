(self.webpackChunktravel_app=self.webpackChunktravel_app||[]).push([[197],{8499:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var s=a(4165),r=a(5861),n=a(4942),l=a(1413),i=a(9439),o=a(2791),d=a(1087),c=a(2388),m=a(7689),u=a(785),p=a(5872),x=a(456),f=a(3746),h=(a(8121),a(165)),g=a(2299),w=a.n(g),b=a(9704),y=a.n(b),v=a(184),j=function(){var e=(0,o.useState)(!1),t=(0,i.Z)(e,2),a=t[0],g=t[1],b=(0,o.useState)(!1),j=(0,i.Z)(b,2),N=j[0],E=j[1],Z=c.Z.create({baseURL:"https://api.trouvailler.com/api"}),k=(0,o.useState)({username:void 0,password:void 0,phone:void 0,email:void 0}),L=(0,i.Z)(k,2),C=L[0],P=L[1],S=(0,o.useState)(!0),F=(0,i.Z)(S,2),I=F[0],T=F[1];function U(){var e=document.getElementById("password");"password"===e.type?(e.type="text",T(!1)):(e.type="password",T(!0))}var O=(0,o.useState)(""),_=(0,i.Z)(O,2),A=(_[0],_[1],(0,o.useState)("")),R=(0,i.Z)(A,2),G=(R[0],R[1],(0,o.useContext)(u.V)),q=(G.user,G.loading,G.error,G.dispatch),B=(0,m.s0)(),z=function(e){P((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,n.Z)({},e.target.id,e.target.value))}))},V=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q({type:"LOGIN_START"}),e.prev=1,e.next=4,Z.post("/auth/googlelogin",t);case 4:(a=e.sent).data?(q({type:"LOGIN_SUCCESS",payload:a.data.details}),B("/")):q({type:"LOGIN_FAILURE",payload:{message:"Invalid credentials"}}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),q({type:"LOGIN_FAILURE",payload:{message:" "}}),e.t0.response?e.t0.response&&405==e.t0.response.status?(alert("The user with this mail id already exists. Please try again with a different account"),q({type:"LOGIN_FAILURE",payload:{message:" "}})):e.t0.response&&403==e.t0.response.status?(alert("Please try again with a different account"),q({type:"LOGIN_FAILURE",payload:{message:" "}})):alert("Please try again with a different account!"):e.t0.request?alert("Network error! Please try again later."):alert(e.t0.message+". Please try again later.");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),D=(0,o.useState)(""),H=(0,i.Z)(D,2),K=H[0],J=H[1],M=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),t.preventDefault(),e.next=4,Z.post("/auth/verifyemail",{email:C.email}).then((function(e){J(e.data.status),g(!1),console.log(e);var t=document.getElementById("otp"),a=document.getElementById("email-con");t.classList.remove("left-[100%]"),t.classList.add("animate","left-0"),a.classList.remove("left-0"),a.classList.add("animate","left-[-100%]")})).catch((function(e){405==e.response.status?(alert("This email is already registered"),g(!1)):(alert(e.response.data.message),g(!1))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=(0,o.useState)(""),W=(0,i.Z)(Q,2),X=W[0],Y=W[1],$=(0,o.useState)(""),ee=(0,i.Z)($,2),te=ee[0],ae=ee[1],se=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=C.password&&""!=te&&0!==C.password.trim().length&&0!=te.trim().length){e.next=5;break}alert("Please fill all the fields"),e.next=20;break;case 5:if(C.password===te){e.next=9;break}alert("Passwords do not match"),e.next=20;break;case 9:if(C.password!==te){e.next=20;break}return e.prev=10,e.next=13,Z.post("/auth/register",C);case 13:e.sent.data?B("/login"):alert("Failed to create new user. Please try again"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),e.t0.response?e.t0.response&&403==e.t0.response.status?alert("Sorry, the username already exists!"):e.t0.response&&405==e.t0.response.status?alert("Sorry, the email id alredy exists!"):e.t0.response&&500==e.t0.response.status?alert("Unable to create a new user. Kindly fill all the mandatory fields."):alert(e.t0.message+". Please try again later."):e.t0.request?alert("Network error! Please try again later."):alert(e.t0.message+". Please try again later.");case 20:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:" h-screen relative w-full font-body",children:[(0,v.jsxs)("div",{className:" bg-[white] overflow-hidden py-4 sm:py-12 min-w-[330px] sm:min-w-[500px] lg:min-w-[600px] absolute z-[110] top-[50%] left-[50%] translate-x-[-50%] rounded-[10px] translate-y-[-50%]  mx-auto ",children:[(0,v.jsx)("h1",{className:"text-center m-4 font-bold text-lg sm:text-2xl",children:"Create an Account"}),(0,v.jsx)("div",{className:"sm:mx-14 glogin mt-4 sm:mt-12",children:(0,v.jsx)(p.kZ,{buttonText:"Sign up with Google",onSuccess:function(e){var t=e.clientId,a=(e.credential,(0,x.Z)(e.credential)),s=(a.email,{});s.username=a.given_name,s.email=a.email;s.phone="add phone number",s.google_id=t,s.img=a.picture,V(s)},shape:"circle",size:"large",onError:function(){console.log("Login failed")}})}),(0,v.jsx)("p",{className:"text-center text-blacky-light  text-xs sm:text-sm my-4 sm:my-8",children:"- OR -"}),(0,v.jsxs)("div",{className:"relative w-[100%] flex  ",children:[(0,v.jsxs)("div",{className:"flex flex-col  min-w-[100%] absolute left-0 mb-20 w-[100%] ",id:"email-con",children:[(0,v.jsx)("div",{className:"bg-[white] relative rounded  w-[90%] sm:w-[70%] mx-auto",children:(0,v.jsx)("input",{type:"email",placeholder:"Enter email",className:" bg-[#E8F0FE]  sm:p-3 outline-none text-sm sm:text-base rounded  border-transparent  w-[100%] focus:ring-[transparent]  focus:border-[transparent] ",id:"email",required:!0,onChange:z})}),a?(0,v.jsx)("div",{className:"mb-4 w-[90%] sm:w-[70%] mx-auto gradientbg  text-white rounded-full px-2 py-2 mt-8 flex justify-center",children:(0,v.jsx)(w(),{color:"white",size:"24"})}):(0,v.jsx)("button",{className:"mb-4 font-medium w-[90%] sm:w-[70%] mx-auto gradientbg  text-white rounded-full px-2 py-2 mt-8",onClick:M,children:"Verify Email"})]}),(0,v.jsxs)("div",{className:"flex flex-col mb-20    left-[100%]  min-w-[100%] relative ",id:"otp",children:[(0,v.jsxs)("div",{className:"bg-[white]  relative rounded  w-[90%] sm:w-[70%] mx-auto ",children:[(0,v.jsx)("h1",{className:"font-bold text-[#474747] text-2xl",children:"Verify Email"}),(0,v.jsx)("p",{className:"text-[#696969] mb-8 mt-2",children:" Enter 4 digit OTP received in your mail"}),(0,v.jsx)("input",{type:"text",placeholder:"Enter OTP",className:" bg-[#E8F0FE]  sm:p-3 outline-none text-sm sm:text-base rounded  border-transparent  w-[100%] focus:ring-[transparent]  focus:border-[transparent] ",id:"otpnum",required:!0,onChange:function(e){Y(e.target.value)}})]}),N?(0,v.jsx)("div",{className:"mb-4 w-[90%] sm:w-[70%] mx-auto gradientbg  text-white rounded-full px-2 py-2 mt-8 flex justify-center",children:(0,v.jsx)(w(),{color:"white",size:"24"})}):(0,v.jsx)("button",{className:"mb-4 font-medium w-[90%] sm:w-[70%] mx-auto gradientbg  text-white rounded-full px-2 py-2 mt-8",onClick:function(e){if(E(!0),e.preventDefault(),K===y().SHA256(X).toString()){var t=document.getElementById("signup"),a=document.getElementById("otp");t.classList.remove("left-[0]"),t.classList.add("animate","left-[-100%]"),a.classList.remove("left-0"),a.classList.add("animate","left-[-100%]")}else alert("The OTP you have entered is wrong. Try again")},children:"Verify OTP"})]}),(0,v.jsxs)("div",{className:"flex flex-col mb-20    left-[0]  min-w-[100%] relative ",id:"signup",children:[(0,v.jsx)("div",{className:"bg-[white] mb-4 relative rounded  w-[90%] sm:w-[70%] mx-auto ",children:(0,v.jsx)("input",{type:"text",placeholder:"Username",className:" bg-[#E8F0FE]  sm:p-3 outline-none text-sm sm:text-base rounded  border-transparent  w-[100%] focus:ring-[transparent]  focus:border-[transparent] ",id:"username",required:!0,onChange:z})}),(0,v.jsx)("div",{className:"bg-[white] mb-4  relative rounded  w-[90%] sm:w-[70%] mx-auto ",children:(0,v.jsx)("input",{type:"text",placeholder:"Phone",className:" bg-[#E8F0FE]  sm:p-3 outline-none text-sm sm:text-base rounded  border-transparent  w-[100%] focus:ring-[transparent]  focus:border-[transparent] ",id:"phone",required:!0,onChange:z})}),(0,v.jsxs)("div",{className:"bg-[#E8F0FE]  relative mb-4  rounded w-[90%] sm:w-[70%] mx-auto",children:[(0,v.jsx)("input",{type:"password",placeholder:"Enter Password",className:" sm:p-3 outline-none rounded text-sm sm:text-base  border-transparent bg-transparent w-[90%] focus:ring-[transparent]  focus:border-[transparent] ",id:"password",onChange:z}),I?(0,v.jsx)(f.Z,{onClick:U,className:"w-[15px] text-[grey] cursor-pointer"}):(0,v.jsx)(h.Z,{onClick:U,className:"w-[15px] text-[grey] cursor-pointer"})]}),(0,v.jsxs)("div",{className:"bg-[#E8F0FE]  relative mb-4 sm:mb-8 rounded w-[90%] sm:w-[70%] mx-auto",children:[(0,v.jsx)("input",{type:"password",placeholder:"Retype Password",className:" sm:p-3 outline-none rounded text-sm sm:text-base  border-transparent bg-transparent w-[90%] focus:ring-[transparent]  focus:border-[transparent] ",id:"confirmpassword",onChange:function(e){ae(e.target.value)}}),I?(0,v.jsx)(f.Z,{onClick:U,className:"w-[15px] text-[grey] cursor-pointer"}):(0,v.jsx)(h.Z,{onClick:U,className:"w-[15px] text-[grey] cursor-pointer"})]}),(0,v.jsx)("button",{className:"mb-4 font-medium w-[90%] sm:w-[70%] mx-auto gradientbg  text-white rounded-full px-2 py-2 mt-8",onClick:se,children:"Create Account"})]})]}),(0,v.jsxs)("p",{className:"text-center absolute bottom-8 left-[50%] translate-x-[-50%] text-sm sm:text-base",children:["Already have an account?",(0,v.jsx)(d.rU,{className:"text-[#339633]",to:"/Login",children:"    Login"})]})]}),(0,v.jsxs)("div",{className:"absolute bottom-0 gap-4 px-4 md:gap-8 flex-wrap right-0 w-full flex  justify-center pb-8 font-body text-sm text-[grey]",children:[(0,v.jsx)("span",{children:"\xa9 Trouvailler Enterprises Private Limited"}),(0,v.jsx)(d.rU,{children:"Return to Home"}),(0,v.jsx)(d.rU,{children:"Terms and Conditions"}),(0,v.jsx)(d.rU,{children:"Privacy policy"})]})]})})}},2480:function(){}}]);
//# sourceMappingURL=197.237c0988.chunk.js.map